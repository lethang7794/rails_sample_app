<% if @user&.username %> <%# Need to be an old record with username, not a new one %>
  <% case request.original_fullpath.downcase %>
  <% when user_path(@user).downcase %>
    <% if @user.name %>  <%# Real user, not user with username from the params %>
      <%= render  partial: 'shared/mini_navbar_partial',
                  locals: {
                    heading: "#{@user.name}",
                    detail: "#{pluralize(@user.microposts.count, 'micropost')}"
                  } %>
    <% else %>
      <%= render  partial: 'shared/mini_navbar_partial',
                  locals: {
                    heading: "Profile",
                    detail: nil
                  } %>
    <% end %>
  <% when media_user_path(@user).downcase %>
    <%= render  partial: 'shared/mini_navbar_partial',
                locals: {
                  heading: "#{@user.name}",
                  detail: "#{pluralize(@user.media.count, 'photo')}"
                } %>
  <% when following_user_path(@user).downcase %>
    <%= render  partial: 'shared/mini_navbar_partial',
                locals: {
                  heading: "#{@user.name}",
                  detail:  "@#{@user.username}"
                } %>
  <% when followers_user_path(@user).downcase %>
    <%= render  partial: 'shared/mini_navbar_partial',
                locals: {
                  heading: "#{@user.name}",
                  detail: "@#{@user.username}"
                } %>
  <% when edit_user_path(@user).downcase %>
    <%= render  partial: 'shared/mini_navbar_partial',
                locals: {
                  heading: "#{@user.name}",
                  detail: "Edit profile"
                } %>
  <% end %>
<% end %>

<% if current_page?('/home') %>
  <%= render 'shared/mini_navbar_home' %>

<% elsif current_page?(controller: 'users', action: 'index') %>
  <%= render  partial: 'shared/mini_navbar_partial',
              locals: {
                heading: "Explorer",
                detail: "Let's follow other people"
              } %>
<% end %>
